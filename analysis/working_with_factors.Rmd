---
title: "Working with factor variables in R"
author: "Amelia McNamara"
date: "June 7, 2016"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Loading the data

We have several options for how to get this data. We could download it in SPSS or Stata formats and use the foreign package to read it in. The GSS download even provides an R file to do the translation for you. Here is the result of that:

```{r}
source('../data/GSS.r')
str(GSS)
```

Obviously, this is less than ideal. Now, all the factor variables are encoded as integers. We have to look at a codebook to determine if `SEX == 1` indicates male or female. We would rather preserve the integrated level labels. In order to do this, our best option is to download the data as an Excel file and use the `readxl` package to load it. 

```{r}
library(readxl)
GSS <- read_excel("../data/GSS.xls")
str(GSS)
GSS <- GSS[,-14]
```

That's a little better. Now we have preserved the character strings. But, the data is not yet useable in an analysis. 

## Renaming the variables

One problem is that the variable names (while human readable) are full of spaces, so are hard to use. But, we can rename them. 

```{r}
library(dplyr)

GSS <- GSS %>% 
  rename(LaborStatus = `Labor force status`)
```

## Considering some factor variables

```{r}
GSS <- GSS %>%
  mutate(LaborStatus = factor(LaborStatus))

GSS %>% 
  select(LaborStatus) %>%
  levels()
```
